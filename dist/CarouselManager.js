Object.defineProperty(exports,"__esModule",{value:true});var _jsxFileName='src/CarouselManager.js';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNativeRootSiblings=require('react-native-root-siblings');var _reactNativeRootSiblings2=_interopRequireDefault(_reactNativeRootSiblings);var _CarouselComponent=require('./CarouselComponent');var _CarouselComponent2=_interopRequireDefault(_CarouselComponent);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var DESTROY_TIMEOUT=500;var LOCK_TIMEOUT=500;var CarouselManager=function(){function CarouselManager(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,CarouselManager);this.locked=false;this.carousels=[];this.show=this.show.bind(this);this.dismiss=this.dismiss.bind(this);this.dismissAll=this.dismissAll.bind(this);this.update=this.update.bind(this);this.props=_extends({},props,{show:false});}_createClass(CarouselManager,[{key:'lockUntilTimeout',value:function lockUntilTimeout(){var _this=this;this.locked=true;setTimeout(function(){_this.locked=false;},LOCK_TIMEOUT);}},{key:'add',value:function add(props){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};if(this.locked){return;}this.lockUntilTimeout();var carousel=new _reactNativeRootSiblings2.default(_react2.default.createElement(_CarouselComponent2.default,_extends({},props,{onDismiss:this.dismiss,__source:{fileName:_jsxFileName,lineNumber:48}})),callback);this.carousels.push(carousel);}},{key:'update',value:function update(props){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};this.props=_extends({},this.props,props);this.currentCarousel.update(_react2.default.createElement(_CarouselComponent2.default,_extends({},this.props,{__source:{fileName:_jsxFileName,lineNumber:58}})),callback);}},{key:'show',value:function show(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};this.props=_extends({},this.props,props,{show:true});this.add(this.props,callback);}},{key:'dismiss',value:function dismiss(){var _this2=this;var callback=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(){};this.update(_extends({},this.props,{show:false}),function(){callback();setTimeout(function(){var carousel=_this2.carousels.pop();if(carousel){carousel.destroy();}},DESTROY_TIMEOUT);});}},{key:'dismissAll',value:function dismissAll(){var _this3=this;var callback=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(){};this.carousels.forEach(function(){_this3.dismiss(callback);});}},{key:'currentCarousel',get:function get(){return this.carousels[this.carousels.length-1];}}]);return CarouselManager;}();exports.default=new CarouselManager();